<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>Madina Book 1 - Complete Mobile Flashcards</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html, body {
            height: 100%;
            overflow-x: hidden;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            touch-action: pan-y;
        }

        /* Cover Page */
        .cover-page {
            padding: 20px;
            max-width: 600px;
            margin: 0 auto;
        }

        .cover-page.hidden {
            display: none;
        }

        .cover-header {
            text-align: center;
            color: white;
            margin-bottom: 25px;
        }

        .cover-header h1 {
            font-size: 1.8em;
            margin-bottom: 8px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .cover-header p {
            font-size: 0.95em;
            opacity: 0.95;
        }

        .lesson-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 12px;
            margin-bottom: 20px;
        }

        .lesson-card {
            background: white;
            border-radius: 12px;
            padding: 18px;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            min-height: 70px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            transition: transform 0.2s;
        }

        .lesson-card:active {
            transform: scale(0.97);
        }

        .lesson-card h3 {
            color: #667eea;
            font-size: 1.2em;
            margin-bottom: 5px;
        }

        .lesson-card .word-count {
            color: #666;
            font-size: 0.85em;
        }

        .all-lessons-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            min-height: 85px;
        }

        .all-lessons-card h3 {
            color: white;
        }

        .all-lessons-card .word-count {
            color: rgba(255, 255, 255, 0.95);
        }

        /* Flashcard Page */
        .flashcard-page {
            display: none;
            flex-direction: column;
            height: 100vh;
            padding: 15px;
            max-width: 600px;
            margin: 0 auto;
        }

        .flashcard-page.active {
            display: flex;
        }

        .back-button {
            background: rgba(255, 255, 255, 0.25);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 10px;
            font-size: 1em;
            margin-bottom: 12px;
            min-height: 48px;
            font-weight: 600;
        }

        .back-button:active {
            background: rgba(255, 255, 255, 0.4);
        }

        .header {
            color: white;
            text-align: center;
            margin-bottom: 12px;
        }

        .header h1 {
            font-size: 1.4em;
            margin-bottom: 5px;
        }

        .stats {
            background: rgba(255, 255, 255, 0.2);
            padding: 12px;
            border-radius: 12px;
            display: flex;
            gap: 10px;
            color: white;
            margin-bottom: 12px;
        }

        .stat-item {
            flex: 1;
            text-align: center;
        }

        .stat-label {
            font-size: 0.75em;
            opacity: 0.9;
            display: block;
        }

        .stat-value {
            font-size: 1.5em;
            font-weight: bold;
            display: block;
        }

        .card-container {
            flex: 1;
            display: flex;
            align-items: center;
            position: relative;
            margin-bottom: 15px;
        }

        .flashcard {
            background: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3);
            width: 100%;
            min-height: 400px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s ease;
            position: relative;
        }

        .flashcard.swipe-left {
            transform: translateX(-50px) rotate(-5deg);
            opacity: 0.7;
        }

        .flashcard.swipe-right {
            transform: translateX(50px) rotate(5deg);
            opacity: 0.7;
        }

        .hint-btn {
            background: #ff9800;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 0.9em;
            margin-bottom: 15px;
            min-height: 44px;
            font-weight: 600;
        }

        .hint-btn:active {
            background: #f57c00;
        }

        .hint-btn:disabled {
            background: #ccc;
        }

        .word-image {
            font-size: 3em;
            margin-bottom: 12px;
            display: none;
        }

        .word-image.revealed {
            display: block;
            animation: fadeIn 0.4s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }

        .arabic-word {
            font-size: 2.2em;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 20px;
            text-align: center;
            direction: rtl;
            line-height: 1.4;
        }

        .input-section {
            width: 100%;
        }

        .helper-buttons {
            display: flex;
            gap: 8px;
            margin-top: 15px;
        }

        .helper-buttons button {
            flex: 1;
            padding: 10px;
            font-size: 0.85em;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            min-height: 44px;
        }

        .input-wrapper {
            margin-bottom: 12px;
        }

        #answer-input {
            width: 100%;
            padding: 14px;
            font-size: 1.05em;
            border: 3px solid #ddd;
            border-radius: 10px;
            outline: none;
            -webkit-appearance: none;
            min-height: 48px;
        }

        #answer-input:focus {
            border-color: #667eea;
        }

        #answer-input.correct {
            border-color: #4caf50;
            background-color: #e8f5e9;
        }

        #answer-input.incorrect {
            border-color: #f44336;
            background-color: #ffebee;
        }

        .check-btn {
            background: #667eea;
            color: white;
            width: 100%;
            padding: 16px;
            font-size: 1.05em;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            min-height: 54px;
            margin-bottom: 12px;
        }

        .check-btn:active {
            background: #5568d3;
        }

        .show-answer-btn {
            background: #9c27b0;
            color: white;
        }

        .show-answer-btn:active {
            background: #7b1fa2;
        }

        .skip-btn {
            background: #ff9800;
            color: white;
        }

        .skip-btn:active {
            background: #e68900;
        }

        .feedback {
            margin-top: 12px;
            padding: 12px;
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
            display: none;
            font-size: 0.95em;
        }

        .feedback.show {
            display: block;
        }

        .feedback.correct {
            background: #4caf50;
            color: white;
        }

        .feedback.incorrect {
            background: #f44336;
            color: white;
        }

        .correct-answer {
            margin-top: 10px;
            padding: 10px;
            background: #fff3cd;
            border-radius: 8px;
            text-align: center;
            display: none;
            font-size: 0.9em;
        }

        .correct-answer.show {
            display: block;
        }

        .navigation {
            display: flex;
            gap: 12px;
            align-items: center;
            justify-content: center;
            max-width: 350px;
            margin: 0 auto;
        }

        .nav-btn {
            background: white;
            color: #667eea;
            padding: 14px 24px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            font-size: 1em;
            min-height: 50px;
            flex: 1;
        }

        .nav-btn:active {
            background: #f0f0f0;
        }

        .card-progress {
            color: white;
            font-size: 1em;
            font-weight: bold;
            padding: 0 8px;
            min-width: 60px;
            text-align: center;
        }

        .swipe-hint {
            color: white;
            text-align: center;
            margin-top: 10px;
            font-size: 0.85em;
            opacity: 0.85;
        }

        .attribution {
            background: rgba(255, 255, 255, 0.15);
            color: white;
            padding: 15px;
            border-radius: 12px;
            margin-top: 20px;
            text-align: center;
            font-size: 0.85em;
            line-height: 1.5;
        }

        .attribution h3 {
            margin-bottom: 8px;
            font-size: 1em;
        }

        .attribution a {
            color: #fff;
            text-decoration: underline;
        }

        /* Prevent text selection during swipe */
        .flashcard * {
            user-select: none;
            -webkit-user-select: none;
        }

        #answer-input {
            user-select: text;
            -webkit-user-select: text;
        }
    </style>
</head>
<body>
    <!-- Cover Page -->
    <div class="cover-page" id="cover-page">
        <div class="cover-header">
            <h1>üìö Madina Book 1</h1>
            <p>Complete Arabic Vocabulary Flashcards</p>
            <p style="font-size: 0.85em; margin-top: 8px;">All 23 Lessons</p>
        </div>

        <div class="lesson-grid" id="lesson-grid">
            <!-- Generated by JavaScript -->
        </div>

        <div class="attribution">
            <h3>üìö Attribution</h3>
            <p><strong>Vocabulary:</strong> Madina Book 1 by Dr. V. Abdur Rahim<br>
            Islamic University of Madinah</p>
            <p><strong>App:</strong> Created with Claude AI</p>
            <p style="margin-top: 8px; font-size: 0.8em;">
                For educational purposes only
            </p>
        </div>
    </div>

    <!-- Flashcard Page -->
    <div class="flashcard-page" id="flashcard-page">
        <button class="back-button" onclick="backToCover()">‚Üê Back to Lessons</button>

        <div class="header">
            <h1 id="lesson-title">Lesson</h1>
        </div>

        <div class="stats">
            <div class="stat-item">
                <span class="stat-label">Correct</span>
                <span class="stat-value" id="correct-count">0</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Wrong</span>
                <span class="stat-value" id="incorrect-count">0</span>
            </div>
            <div class="stat-item">
                <span class="stat-label">Score</span>
                <span class="stat-value" id="accuracy">0%</span>
            </div>
        </div>

        <div class="card-container">
            <div class="flashcard" id="flashcard">
                <button class="hint-btn" id="hint-btn">üí° Hint</button>
                <div class="word-image" id="word-image">üìñ</div>
                <div class="arabic-word" id="arabic-word"></div>
                
                <div class="input-section">
                    <div class="input-wrapper">
                        <input 
                            type="text" 
                            id="answer-input" 
                            placeholder="Type English translation..."
                            autocomplete="off"
                            autocorrect="off"
                            autocapitalize="off"
                        >
                    </div>

                    <button class="check-btn" id="check-btn">‚úì Check Answer</button>

                    <div class="feedback" id="feedback"></div>
                    <div class="correct-answer" id="correct-answer"></div>

                    <div class="helper-buttons">
                        <button class="show-answer-btn" id="show-answer-btn">üëÅ Show Answer</button>
                        <button class="skip-btn" id="skip-btn">‚è≠ Skip Card</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="navigation">
            <button class="nav-btn" id="prev-btn">‚Üê Prev</button>
            <span class="card-progress" id="card-progress">1/1</span>
            <button class="nav-btn" id="next-btn">Next ‚Üí</button>
        </div>

        <div class="swipe-hint">
            üí° Swipe left/right to navigate
        </div>
    </div>

    <script>
        // Complete vocabulary data for all 23 lessons
        const vocabularyData = {
            1: [
                { arabic: 'ÿ®ŸéŸäŸíÿ™Ÿå', english: 'house', emoji: 'üè†' },
                { arabic: 'ŸÖŸéÿ≥Ÿíÿ¨ŸêÿØŸå', english: 'mosque', emoji: 'üïå' },
                { arabic: 'ÿ®Ÿéÿßÿ®Ÿå', english: 'door', emoji: 'üö™' },
                { arabic: 'ŸÉŸêÿ™Ÿéÿßÿ®Ÿå', english: 'book', emoji: 'üìñ' },
                { arabic: 'ŸÇŸéŸÑŸéŸÖŸå', english: 'pen', emoji: '‚úíÔ∏è' },
                { arabic: 'ŸÖŸêŸÅŸíÿ™Ÿéÿßÿ≠Ÿå', english: 'key', emoji: 'üîë' },
                { arabic: 'ŸÖŸéŸÉŸíÿ™Ÿéÿ®Ÿå', english: 'desk', emoji: 'ü™ë' },
                { arabic: 'ÿ≥Ÿéÿ±ŸêŸäÿ±Ÿå', english: 'bed', emoji: 'üõèÔ∏è' },
                { arabic: 'ŸÉŸèÿ±Ÿíÿ≥ŸêŸäŸåŸë', english: 'chair', emoji: 'ü™ë' },
                { arabic: 'ŸÜŸéÿ¨ŸíŸÖŸå', english: 'star', emoji: '‚≠ê' },
                { arabic: 'ŸÇŸéŸÖŸêŸäÿµŸå', english: 'shirt', emoji: 'üëî' },
                { arabic: 'ÿ∑Ÿéÿ®ŸêŸäÿ®Ÿå', english: 'doctor', emoji: 'üë®‚Äç‚öïÔ∏è' },
                { arabic: 'ŸàŸéŸÑŸéÿØŸå', english: 'boy', emoji: 'üë¶' },
                { arabic: 'ÿ∑ŸéÿßŸÑŸêÿ®Ÿå', english: 'student', emoji: 'üìö' },
                { arabic: 'ÿ±Ÿéÿ¨ŸèŸÑŸå', english: 'man', emoji: 'üë®' },
                { arabic: 'ÿ™Ÿéÿßÿ¨Ÿêÿ±Ÿå', english: 'merchant', emoji: 'üõí' },
                { arabic: 'ŸÉŸéŸÑŸíÿ®Ÿå', english: 'dog', emoji: 'üêï' },
                { arabic: 'ŸÇŸêÿ∑ŸåŸë', english: 'cat', emoji: 'üêà' },
                { arabic: 'ÿ≠ŸêŸÖŸéÿßÿ±Ÿå', english: 'donkey', emoji: 'ü´è' },
                { arabic: 'ÿ≠ŸêÿµŸéÿßŸÜŸå', english: 'horse', emoji: 'üê¥' },
                { arabic: 'ÿ¨ŸéŸÖŸéŸÑŸå', english: 'camel', emoji: 'üê´' },
                { arabic: 'ÿØŸêŸäŸÉŸå', english: 'rooster', emoji: 'üêì' },
                { arabic: 'ŸÖŸèÿØŸéÿ±ŸêŸëÿ≥Ÿå', english: 'teacher', emoji: 'üë®‚Äçüè´' },
                { arabic: 'ŸÖŸêŸÜŸíÿØŸêŸäŸÑŸå', english: 'handkerchief', emoji: 'üßª' }
            ],
            2: [
                { arabic: 'ÿ≠Ÿéÿ¨Ÿéÿ±Ÿå', english: 'stone', emoji: 'ü™®' },
                { arabic: 'ÿ≠ŸéŸÑŸêŸäÿ®Ÿå', english: 'milk', emoji: 'ü•õ' },
                { arabic: 'ÿ≤ŸéÿπŸêŸäŸÖŸå', english: 'leader', emoji: 'üëî' },
                { arabic: 'ÿ≥ŸèŸÉŸéŸëÿ±Ÿå', english: 'sugar', emoji: 'üßÇ' },
                { arabic: 'ŸÉŸèÿ±ŸéŸëÿßÿ≥Ÿéÿ©Ÿå', english: 'notebook', emoji: 'üìì' },
                { arabic: 'ÿØŸèŸÉŸéŸëÿßŸÜŸå', english: 'shop', emoji: 'üè™' },
                { arabic: 'ŸàŸéÿ±ŸéŸÇŸéÿ©Ÿå', english: 'paper', emoji: 'üìÑ' },
                { arabic: 'ÿ™ŸèŸÅŸéŸëÿßÿ≠Ÿéÿ©Ÿå', english: 'apple', emoji: 'üçé' }
            ],
            3: [
                { arabic: 'ÿ£Ÿéÿ®Ÿå', english: 'father', emoji: 'üë®' },
                { arabic: 'ÿ£ŸéÿÆŸå', english: 'brother', emoji: 'üë¶' },
                { arabic: 'ÿ±Ÿéÿ≥ŸèŸàŸÑŸå', english: 'messenger', emoji: 'üì®' },
                { arabic: 'ÿßŸÑŸÄ', english: 'the', emoji: 'üìå' }
            ],
            4: [
                { arabic: 'ŸÖŸéŸÉŸíÿ≥ŸèŸàÿ±Ÿå', english: 'broken', emoji: 'üíî' },
                { arabic: 'ŸÖŸéŸÅŸíÿ™ŸèŸàÿ≠Ÿå', english: 'open', emoji: 'üîì' },
                { arabic: 'ÿ¨ŸéÿßŸÑŸêÿ≥Ÿå', english: 'sitting', emoji: 'ü™ë' },
                { arabic: 'ŸàŸéÿßŸÇŸêŸÅŸå', english: 'standing', emoji: 'üßç' },
                { arabic: 'ÿ¨ŸéÿØŸêŸäÿØŸå', english: 'new', emoji: '‚ú®' },
                { arabic: 'ŸÇŸéÿØŸêŸäŸÖŸå', english: 'old', emoji: 'üìú' }
            ],
            5: [
                { arabic: 'ŸÖŸéÿßÿ°Ÿå', english: 'water', emoji: 'üíß' },
                { arabic: 'ÿ®Ÿéÿßÿ±ŸêÿØŸå', english: 'cold', emoji: '‚ùÑÔ∏è' },
                { arabic: 'ŸÇŸéÿ±ŸêŸäÿ®Ÿå', english: 'near', emoji: 'üìç' },
                { arabic: 'ÿ®ŸéÿπŸêŸäÿØŸå', english: 'far', emoji: 'üåç' },
                { arabic: 'ÿ≠Ÿéÿßÿ±ŸåŸë', english: 'hot', emoji: 'üî•' },
                { arabic: 'ÿµŸéÿ∫ŸêŸäÿ±Ÿå', english: 'small', emoji: 'üîç' },
                { arabic: 'ŸÉŸéÿ®ŸêŸäÿ±Ÿå', english: 'big', emoji: 'üìè' },
                { arabic: 'ŸàŸéÿ≥ŸêÿÆŸå', english: 'dirty', emoji: 'üí©' },
                { arabic: 'ÿ¨ŸéŸÖŸêŸäŸÑŸå', english: 'beautiful', emoji: '‚ú®' }
            ],
            6: [
                { arabic: 'ÿÆŸèÿ®Ÿíÿ≤Ÿå', english: 'bread', emoji: 'üçû' },
                { arabic: 'ÿπŸéŸäŸíŸÜŸå', english: 'eye', emoji: 'üëÅÔ∏è' },
                { arabic: 'ŸàŸéÿ¨ŸíŸáŸå', english: 'face', emoji: 'üòä' },
                { arabic: 'ÿµŸéÿØŸêŸäŸÇŸå', english: 'friend', emoji: 'ü§ù' },
                { arabic: 'ÿ≥Ÿèÿ§ŸéÿßŸÑŸå', english: 'question', emoji: '‚ùì' },
                { arabic: 'ÿ¨ŸéŸàŸéÿßÿ®Ÿå', english: 'answer', emoji: 'üí¨' },
                { arabic: 'ÿ®Ÿéÿßÿ®Ÿå', english: 'door', emoji: 'üö™' },
                { arabic: 'ÿ≥ŸéŸÖŸéÿßÿ°Ÿå', english: 'sky', emoji: '‚òÅÔ∏è' }
            ],
            7: [
                { arabic: 'ÿ∑ŸéŸàŸêŸäŸÑŸå', english: 'long', emoji: 'üìè' },
                { arabic: 'ŸÇŸéÿµŸêŸäÿ±Ÿå', english: 'short', emoji: 'üìê' },
                { arabic: 'ÿ´ŸéŸÇŸêŸäŸÑŸå', english: 'heavy', emoji: '‚öñÔ∏è' },
                { arabic: 'ÿÆŸéŸÅŸêŸäŸÅŸå', english: 'light', emoji: 'ü™∂' },
                { arabic: 'ŸÜŸéÿ∏ŸêŸäŸÅŸå', english: 'clean', emoji: '‚ú®' },
                { arabic: 'ÿ≥ŸéŸáŸíŸÑŸå', english: 'easy', emoji: 'üëç' },
                { arabic: 'ÿµŸéÿπŸíÿ®Ÿå', english: 'difficult', emoji: 'ü§î' }
            ],
            8: [
                { arabic: 'ŸÑŸéŸäŸíŸÑŸå', english: 'night', emoji: 'üåô' },
                { arabic: 'ŸÜŸéŸáŸéÿßÿ±Ÿå', english: 'day', emoji: '‚òÄÔ∏è' },
                { arabic: 'ÿµŸéÿ®Ÿéÿßÿ≠Ÿå', english: 'morning', emoji: 'üåÖ' },
                { arabic: 'ŸÖŸéÿ≥Ÿéÿßÿ°Ÿå', english: 'evening', emoji: 'üåÜ' }
            ],
            9: [
                { arabic: 'ÿ∫ŸéŸÜŸêŸäŸåŸë', english: 'rich', emoji: 'üí∞' },
                { arabic: 'ŸÅŸéŸÇŸêŸäÿ±Ÿå', english: 'poor', emoji: 'üí∏' },
                { arabic: 'ŸÉŸéÿ±ŸêŸäŸÖŸå', english: 'generous', emoji: 'üéÅ' },
                { arabic: 'ÿ®ŸéÿÆŸêŸäŸÑŸå', english: 'stingy', emoji: 'üö´' },
                { arabic: 'ŸÇŸéŸàŸêŸäŸåŸë', english: 'strong', emoji: 'üí™' },
                { arabic: 'ÿ∂ŸéÿπŸêŸäŸÅŸå', english: 'weak', emoji: 'üòî' }
            ],
            10: [
                { arabic: 'ÿ•Ÿêÿ≥ŸíŸÖŸå', english: 'name', emoji: 'üè∑Ô∏è' },
                { arabic: 'ÿÆŸéÿßŸÑŸêÿØŸå', english: 'khalid', emoji: 'üë§' },
                { arabic: 'ŸÖŸèÿ≠ŸéŸÖŸéŸëÿØŸå', english: 'muhammad', emoji: 'üë§' },
                { arabic: 'ÿπŸéŸÑŸêŸäŸåŸë', english: 'ali', emoji: 'üë§' },
                { arabic: 'ÿ≠ŸéÿßŸÖŸêÿØŸå', english: 'hamid', emoji: 'üë§' },
                { arabic: 'ÿπŸéÿ±Ÿéÿ®ŸêŸäŸåŸë', english: 'arabic', emoji: 'üá∏üá¶' },
                { arabic: 'ÿ•ŸêŸÜŸíÿ¨ŸíŸÑŸêŸäÿ≤ŸêŸäŸåŸë', english: 'english', emoji: 'üá¨üáß' },
                { arabic: 'ÿ£Ÿèÿ±ŸíÿØŸêŸäŸéŸëÿ©Ÿå', english: 'urdu', emoji: 'üáµüá∞' },
                { arabic: 'ÿ≤ŸéŸÖŸêŸäŸÑŸå', english: 'colleague', emoji: 'üë•' },
                { arabic: 'ÿ£ŸéŸäŸíÿ∂Ÿãÿß', english: 'also', emoji: '‚ûï' },
                { arabic: 'ŸàŸéÿßÿ≠ŸêÿØŸå', english: 'one', emoji: '1Ô∏è‚É£' },
                { arabic: 'ÿ•Ÿêÿ´ŸíŸÜŸéÿßŸÜŸê', english: 'two', emoji: '2Ô∏è‚É£' },
                { arabic: 'ÿ£ŸèŸÖŸåŸë', english: 'mother', emoji: 'üë©' },
                { arabic: 'ÿ£Ÿéÿ®Ÿå', english: 'father', emoji: 'üë®' },
                { arabic: 'ÿ£ŸéÿÆŸå', english: 'brother', emoji: 'üë¶' },
                { arabic: 'ÿ£ŸèÿÆŸíÿ™Ÿå', english: 'sister', emoji: 'üëß' }
            ],
            11: [
                { arabic: 'ÿ£ŸéŸÖŸéÿßŸÖŸé', english: 'in front', emoji: '‚¨ÜÔ∏è' },
                { arabic: 'ÿ™Ÿéÿ≠Ÿíÿ™Ÿé', english: 'under', emoji: '‚¨áÔ∏è' },
                { arabic: 'ŸÅŸéŸàŸíŸÇŸé', english: 'above', emoji: '‚¨ÜÔ∏è' },
                { arabic: 'ÿÆŸéŸÑŸíŸÅŸé', english: 'behind', emoji: '‚¨ÖÔ∏è' },
                { arabic: 'ÿ®ŸéŸäŸíŸÜŸé', english: 'between', emoji: '‚ÜîÔ∏è' },
                { arabic: 'ÿπŸéŸÑŸéŸâ', english: 'on', emoji: 'üìå' },
                { arabic: 'ŸÅŸêŸä', english: 'in', emoji: 'üìç' },
                { arabic: 'ŸÖŸêŸÜŸí', english: 'from', emoji: '‚¨ÖÔ∏è' },
                { arabic: 'ÿ•ŸêŸÑŸéŸâ', english: 'to', emoji: '‚û°Ô∏è' }
            ],
            12: [
                { arabic: 'ÿ£ŸéŸÜŸéÿß', english: 'i', emoji: 'üë§' },
                { arabic: 'ŸÜŸéÿ≠ŸíŸÜŸè', english: 'we', emoji: 'üë•' },
                { arabic: 'ÿ£ŸéŸÜŸíÿ™Ÿé', english: 'you (m)', emoji: 'üë§' },
                { arabic: 'ÿ£ŸéŸÜŸíÿ™Ÿê', english: 'you (f)', emoji: 'üë§' },
                { arabic: 'ÿ£ŸéŸÜŸíÿ™ŸèŸÖŸéÿß', english: 'you two', emoji: 'üë•' },
                { arabic: 'ÿ£ŸéŸÜŸíÿ™ŸèŸÖŸí', english: 'you (pl m)', emoji: 'üë•' },
                { arabic: 'ÿ£ŸéŸÜŸíÿ™ŸèŸÜŸéŸë', english: 'you (pl f)', emoji: 'üë•' },
                { arabic: 'ŸáŸèŸàŸé', english: 'he', emoji: 'üë§' },
                { arabic: 'ŸáŸêŸäŸé', english: 'she', emoji: 'üë§' },
                { arabic: 'ŸáŸèŸÖŸéÿß', english: 'they two', emoji: 'üë•' },
                { arabic: 'ŸáŸèŸÖŸí', english: 'they (m)', emoji: 'üë•' },
                { arabic: 'ŸáŸèŸÜŸéŸë', english: 'they (f)', emoji: 'üë•' }
            ],
            13: [
                { arabic: 'ŸÅŸéŸÇŸêŸäÿ±Ÿå', english: 'poor', emoji: 'üí∞' },
                { arabic: 'ŸÅŸèŸÇŸéÿ±Ÿéÿßÿ°Ÿè', english: 'poor (pl)', emoji: 'üí∞' },
                { arabic: 'ÿ∫ŸéŸÜŸêŸäŸåŸë', english: 'rich', emoji: 'üíé' },
                { arabic: 'ÿ£Ÿéÿ∫ŸíŸÜŸêŸäŸéÿßÿ°Ÿè', english: 'rich (pl)', emoji: 'üíé' },
                { arabic: 'ÿµŸéÿØŸêŸäŸÇŸå', english: 'friend', emoji: 'ü§ù' },
                { arabic: 'ÿ£ŸéÿµŸíÿØŸêŸÇŸéÿßÿ°Ÿè', english: 'friends', emoji: 'üë•' },
                { arabic: 'ÿ∑Ÿéÿ®ŸêŸäÿ®Ÿå', english: 'doctor', emoji: 'üë®‚Äç‚öïÔ∏è' },
                { arabic: 'ÿ£Ÿéÿ∑Ÿêÿ®ŸéŸëÿßÿ°Ÿè', english: 'doctors', emoji: 'üë®‚Äç‚öïÔ∏è' },
                { arabic: 'ÿ£ŸéÿÆŸå', english: 'brother', emoji: 'üë¶' },
                { arabic: 'ÿ•ŸêÿÆŸíŸàŸéÿ©Ÿå', english: 'brothers', emoji: 'üë¶' },
                { arabic: 'ŸÖŸèÿØŸéÿ±ŸêŸëÿ≥Ÿå', english: 'teacher', emoji: 'üë®‚Äçüè´' },
                { arabic: 'ŸÖŸèÿØŸéÿ±ŸêŸëÿ≥ŸèŸàŸÜŸé', english: 'teachers', emoji: 'üë®‚Äçüè´' },
                { arabic: 'ÿ∑ŸéÿßŸÑŸêÿ®Ÿå', english: 'student', emoji: 'üìö' },
                { arabic: 'ÿ∑ŸèŸÑÿßŸéŸëÿ®Ÿå', english: 'students', emoji: 'üìö' },
                { arabic: 'ÿ±Ÿéÿ¨ŸèŸÑŸå', english: 'man', emoji: 'üë®' },
                { arabic: 'ÿ±Ÿêÿ¨ŸéÿßŸÑŸå', english: 'men', emoji: 'üë®' },
                { arabic: 'ŸÉŸéÿ®ŸêŸäÿ±Ÿå', english: 'big', emoji: 'üìè' },
                { arabic: 'ŸÉŸêÿ®Ÿéÿßÿ±Ÿå', english: 'big (pl)', emoji: 'üìè' },
                { arabic: 'ÿµŸéÿ∫ŸêŸäÿ±Ÿå', english: 'small', emoji: 'üîç' },
                { arabic: 'ÿµŸêÿ∫Ÿéÿßÿ±Ÿå', english: 'small (pl)', emoji: 'üîç' },
                { arabic: 'ŸàŸéŸÑŸéÿØŸå', english: 'boy', emoji: 'üë¶' },
                { arabic: 'ÿ£ŸéŸàŸíŸÑÿßÿØŸå', english: 'boys', emoji: 'üë¶' },
                { arabic: 'ŸÉŸêÿ™Ÿéÿßÿ®Ÿå', english: 'book', emoji: 'üìñ' },
                { arabic: 'ŸÉŸèÿ™Ÿèÿ®Ÿå', english: 'books', emoji: 'üìö' },
                { arabic: 'ŸÇŸéŸÑŸéŸÖŸå', english: 'pen', emoji: '‚úíÔ∏è' },
                { arabic: 'ÿ£ŸéŸÇŸíŸÑÿßŸÖŸå', english: 'pens', emoji: '‚úíÔ∏è' },
                { arabic: 'ŸÖŸèÿ≥ŸíŸÑŸêŸÖŸå', english: 'muslim', emoji: 'üïå' },
                { arabic: 'ŸÖŸèÿ≥ŸíŸÑŸêŸÖŸèŸàŸÜŸé', english: 'muslims', emoji: 'üïå' }
            ],
            14: [
                { arabic: 'ÿ∞ŸéŸáŸéÿ®Ÿé', english: 'went', emoji: 'üö∂' },
                { arabic: 'ÿ¨ŸéŸÑŸéÿ≥Ÿé', english: 'sat', emoji: 'ü™ë' },
                { arabic: 'ŸÅŸéÿ™Ÿéÿ≠Ÿé', english: 'opened', emoji: 'üîì' },
                { arabic: 'ÿ¥Ÿéÿ±Ÿêÿ®Ÿé', english: 'drank', emoji: 'ü•§' },
                { arabic: 'ÿ£ŸéŸÉŸéŸÑŸé', english: 'ate', emoji: 'üçΩÔ∏è' },
                { arabic: 'ÿØŸéÿ±Ÿéÿ≥Ÿé', english: 'studied', emoji: 'üìö' },
                { arabic: 'ŸÉŸéÿ™Ÿéÿ®Ÿé', english: 'wrote', emoji: '‚úçÔ∏è' },
                { arabic: 'ŸÇŸéÿ±Ÿéÿ£Ÿé', english: 'read', emoji: 'üìñ' },
                { arabic: 'ÿÆŸéÿ±Ÿéÿ¨Ÿé', english: 'went out', emoji: 'üö™' },
                { arabic: 'ÿØŸéÿÆŸéŸÑŸé', english: 'entered', emoji: 'üö™' }
            ],
            15: [
                { arabic: 'ŸÇŸéÿ®ŸíŸÑŸé', english: 'before', emoji: '‚è™' },
                { arabic: 'ÿ®ŸéÿπŸíÿØŸé', english: 'after', emoji: '‚è©' },
                { arabic: 'ŸÖŸéÿ™ŸéŸâ', english: 'when', emoji: 'üïê' },
                { arabic: 'ÿ£ŸéŸäŸíŸÜŸé', english: 'where', emoji: 'üìç' },
                { arabic: 'ŸÉŸéŸäŸíŸÅŸé', english: 'how', emoji: '‚ùì' },
                { arabic: 'ŸÖŸéÿßÿ∞Ÿéÿß', english: 'what', emoji: '‚ùì' },
                { arabic: 'ŸÖŸéŸÜŸí', english: 'who', emoji: 'üë§' },
                { arabic: 'ŸÑŸêŸÖŸéÿßÿ∞Ÿéÿß', english: 'why', emoji: '‚ùì' }
            ],
            16: [
                { arabic: 'ŸÖŸéÿØŸêŸäŸÜŸéÿ©Ÿå', english: 'city', emoji: 'üèôÔ∏è' },
                { arabic: 'ŸÇŸéÿ±ŸíŸäŸéÿ©Ÿå', english: 'village', emoji: 'üèòÔ∏è' },
                { arabic: 'ÿ≥ŸèŸàŸÇŸå', english: 'market', emoji: 'üõí' },
                { arabic: 'ŸÖŸéÿ∑Ÿéÿßÿ±Ÿå', english: 'airport', emoji: '‚úàÔ∏è' },
                { arabic: 'ŸÖŸéÿ≠Ÿéÿ∑ŸéŸëÿ©Ÿå', english: 'station', emoji: 'üöâ' },
                { arabic: 'ÿ¨ŸéÿßŸÖŸêÿπŸéÿ©Ÿå', english: 'university', emoji: 'üéì' },
                { arabic: 'ŸÖŸéÿØŸíÿ±Ÿéÿ≥Ÿéÿ©Ÿå', english: 'school', emoji: 'üè´' },
                { arabic: 'ŸÖŸéŸÉŸíÿ™Ÿéÿ®Ÿéÿ©Ÿå', english: 'library', emoji: 'üìö' },
                { arabic: 'ŸÖŸèÿ≥Ÿíÿ™Ÿéÿ¥ŸíŸÅŸéŸâ', english: 'hospital', emoji: 'üè•' },
                { arabic: 'ŸÅŸèŸÜŸíÿØŸèŸÇŸå', english: 'hotel', emoji: 'üè®' }
            ],
            17: [
                { arabic: 'ÿ≥ŸéÿπŸèŸàÿØŸêŸäŸéŸëÿ©Ÿå', english: 'saudi arabia', emoji: 'üá∏üá¶' },
                { arabic: 'ÿ®ŸéÿßŸÉŸêÿ≥Ÿíÿ™ŸéÿßŸÜŸè', english: 'pakistan', emoji: 'üáµüá∞' },
                { arabic: 'ŸÖŸêÿµŸíÿ±Ÿè', english: 'egypt', emoji: 'üá™üá¨' },
                { arabic: 'ÿ™Ÿèÿ±ŸíŸÉŸêŸäŸéÿß', english: 'turkey', emoji: 'üáπüá∑' },
                { arabic: 'ÿßŸÑŸáŸêŸÜŸíÿØŸè', english: 'india', emoji: 'üáÆüá≥' },
                { arabic: 'ÿßŸÑŸäŸéÿßÿ®ŸéÿßŸÜŸè', english: 'japan', emoji: 'üáØüáµ' },
                { arabic: 'ÿ£ŸéŸÖŸíÿ±ŸêŸäŸÉŸéÿß', english: 'america', emoji: 'üá∫üá∏' },
                { arabic: 'ÿ®Ÿéÿ±ŸêŸäÿ∑ŸéÿßŸÜŸêŸäŸéÿß', english: 'britain', emoji: 'üá¨üáß' },
                { arabic: 'ŸÖŸéŸÉŸéŸëÿ©Ÿè', english: 'makkah', emoji: 'üïã' },
                { arabic: 'ÿßŸÑŸÖŸéÿØŸêŸäŸÜŸéÿ©Ÿè', english: 'madinah', emoji: 'üïå' }
            ],
            18: [
                { arabic: 'ŸàŸéÿßÿ≠ŸêÿØŸå', english: 'one', emoji: '1Ô∏è‚É£' },
                { arabic: 'ÿ•Ÿêÿ´ŸíŸÜŸéÿßŸÜŸê', english: 'two', emoji: '2Ô∏è‚É£' },
                { arabic: 'ÿ´ŸéŸÑÿßÿ´Ÿéÿ©Ÿå', english: 'three', emoji: '3Ô∏è‚É£' },
                { arabic: 'ÿ£Ÿéÿ±Ÿíÿ®ŸéÿπŸéÿ©Ÿå', english: 'four', emoji: '4Ô∏è‚É£' },
                { arabic: 'ÿÆŸéŸÖŸíÿ≥Ÿéÿ©Ÿå', english: 'five', emoji: '5Ô∏è‚É£' },
                { arabic: 'ÿ≥Ÿêÿ™ŸéŸëÿ©Ÿå', english: 'six', emoji: '6Ô∏è‚É£' },
                { arabic: 'ÿ≥Ÿéÿ®ŸíÿπŸéÿ©Ÿå', english: 'seven', emoji: '7Ô∏è‚É£' },
                { arabic: 'ÿ´ŸéŸÖŸéÿßŸÜŸêŸäŸéÿ©Ÿå', english: 'eight', emoji: '8Ô∏è‚É£' },
                { arabic: 'ÿ™Ÿêÿ≥ŸíÿπŸéÿ©Ÿå', english: 'nine', emoji: '9Ô∏è‚É£' },
                { arabic: 'ÿπŸéÿ¥Ÿéÿ±Ÿéÿ©Ÿå', english: 'ten', emoji: 'üîü' },
                { arabic: 'ÿπŸêŸäÿØŸå', english: 'festival', emoji: 'üéâ' },
                { arabic: 'ŸäŸéŸàŸíŸÖŸå', english: 'day', emoji: 'üìÖ' }
            ],
            19: [
                { arabic: 'ÿ¨Ÿêÿ≥Ÿíÿ±Ÿå', english: 'bridge', emoji: 'üåâ' },
                { arabic: 'ŸÜŸéŸáŸíÿ±Ÿå', english: 'river', emoji: 'üåä' },
                { arabic: 'ÿ®Ÿéÿ≠Ÿíÿ±Ÿå', english: 'sea', emoji: 'üåä' },
                { arabic: 'ÿ¥Ÿéÿ¨Ÿéÿ±Ÿéÿ©Ÿå', english: 'tree', emoji: 'üå≥' },
                { arabic: 'ÿ≤ŸéŸáŸíÿ±Ÿéÿ©Ÿå', english: 'flower', emoji: 'üå∏' },
                { arabic: 'ÿ≠ŸéÿØŸêŸäŸÇŸéÿ©Ÿå', english: 'garden', emoji: 'üè°' },
                { arabic: 'ÿ¥ŸéŸÖŸíÿ≥Ÿå', english: 'sun', emoji: '‚òÄÔ∏è' },
                { arabic: 'ŸÇŸéŸÖŸéÿ±Ÿå', english: 'moon', emoji: 'üåô' },
                { arabic: 'ŸÜŸéÿ¨ŸíŸÖŸå', english: 'star', emoji: '‚≠ê' }
            ],
            20: [
                { arabic: 'ÿ£Ÿèÿ≥Ÿíÿ®ŸèŸàÿπŸå', english: 'week', emoji: 'üìÖ' },
                { arabic: 'ÿ¥ŸéŸáŸíÿ±Ÿå', english: 'month', emoji: 'üìÜ' },
                { arabic: 'ÿ≥ŸéŸÜŸéÿ©Ÿå', english: 'year', emoji: 'üìÖ' },
                { arabic: 'ÿßŸÑÿ£Ÿéÿ≠ŸéÿØŸè', english: 'sunday', emoji: 'üìÖ' },
                { arabic: 'ÿßŸÑÿ•Ÿêÿ´ŸíŸÜŸéŸäŸíŸÜŸê', english: 'monday', emoji: 'üìÖ' },
                { arabic: 'ÿßŸÑÿ´ŸèŸëŸÑÿßÿ´Ÿéÿßÿ°Ÿè', english: 'tuesday', emoji: 'üìÖ' },
                { arabic: 'ÿßŸÑÿ£Ÿéÿ±Ÿíÿ®ŸêÿπŸéÿßÿ°Ÿè', english: 'wednesday', emoji: 'üìÖ' },
                { arabic: 'ÿßŸÑÿÆŸéŸÖŸêŸäÿ≥Ÿè', english: 'thursday', emoji: 'üìÖ' },
                { arabic: 'ÿßŸÑÿ¨ŸèŸÖŸèÿπŸéÿ©Ÿè', english: 'friday', emoji: 'üìÖ' },
                { arabic: 'ÿßŸÑÿ≥ŸéŸëÿ®Ÿíÿ™Ÿè', english: 'saturday', emoji: 'üìÖ' }
            ],
            21: [
                { arabic: 'ÿ≥ŸéŸäŸéŸëÿßÿ±Ÿéÿ©Ÿå', english: 'car', emoji: 'üöó' },
                { arabic: 'ÿ≠ŸéÿßŸÅŸêŸÑŸéÿ©Ÿå', english: 'bus', emoji: 'üöå' },
                { arabic: 'ŸÇŸêÿ∑Ÿéÿßÿ±Ÿå', english: 'train', emoji: 'üöÇ' },
                { arabic: 'ÿ∑Ÿéÿßÿ¶Ÿêÿ±Ÿéÿ©Ÿå', english: 'plane', emoji: '‚úàÔ∏è' },
                { arabic: 'ÿ≥ŸéŸÅŸêŸäŸÜŸéÿ©Ÿå', english: 'ship', emoji: 'üö¢' },
                { arabic: 'ÿØŸéÿ±ŸéŸëÿßÿ¨Ÿéÿ©Ÿå', english: 'bicycle', emoji: 'üö≤' },
                { arabic: 'ÿ∑Ÿéÿ±ŸêŸäŸÇŸå', english: 'road', emoji: 'üõ£Ô∏è' },
                { arabic: 'ÿ¥Ÿéÿßÿ±ŸêÿπŸå', english: 'street', emoji: 'üèôÔ∏è' }
            ],
            22: [
                { arabic: 'ÿ£Ÿéÿ≠ŸíŸÖŸéÿ±Ÿè', english: 'red', emoji: 'üî¥' },
                { arabic: 'ÿ£Ÿéÿ≤Ÿíÿ±ŸéŸÇŸè', english: 'blue', emoji: 'üîµ' },
                { arabic: 'ÿ£ŸéÿÆŸíÿ∂Ÿéÿ±Ÿè', english: 'green', emoji: 'üü¢' },
                { arabic: 'ÿ£ŸéÿµŸíŸÅŸéÿ±Ÿè', english: 'yellow', emoji: 'üü°' },
                { arabic: 'ÿ£Ÿéÿ®ŸíŸäŸéÿ∂Ÿè', english: 'white', emoji: '‚ö™' },
                { arabic: 'ÿ£Ÿéÿ≥ŸíŸàŸéÿØŸè', english: 'black', emoji: '‚ö´' },
                { arabic: 'ŸÑŸéŸàŸíŸÜŸå', english: 'color', emoji: 'üé®' },
                { arabic: 'ÿ±Ÿéÿ£Ÿíÿ≥Ÿå', english: 'head', emoji: 'üë§' },
                { arabic: 'ŸäŸéÿØŸå', english: 'hand', emoji: '‚úã' },
                { arabic: 'ÿ±Ÿêÿ¨ŸíŸÑŸå', english: 'leg', emoji: 'ü¶µ' }
            ],
            23: [
                { arabic: 'ÿ®Ÿêÿ≥ŸíŸÖŸê ÿßŸÑŸÑŸáŸê', english: 'in the name of allah', emoji: 'üïå' },
                { arabic: 'ÿßŸÑÿ±ŸéŸëÿ≠ŸíŸÖŸéŸÜŸê', english: 'the most merciful', emoji: '‚ò™Ô∏è' },
                { arabic: 'ÿßŸÑÿ±ŸéŸëÿ≠ŸêŸäŸÖŸê', english: 'the most compassionate', emoji: '‚ò™Ô∏è' },
                { arabic: 'ÿßŸÑÿ≠ŸéŸÖŸíÿØŸè', english: 'praise', emoji: 'ü§≤' },
                { arabic: 'ÿ±Ÿéÿ®ŸêŸë', english: 'lord', emoji: '‚ò™Ô∏è' },
                { arabic: 'ÿßŸÑÿπŸéÿßŸÑŸéŸÖŸêŸäŸÜŸé', english: 'of the worlds', emoji: 'üåç' },
                { arabic: 'ŸÖŸéÿßŸÑŸêŸÉŸê', english: 'master', emoji: 'üëë' },
                { arabic: 'ŸäŸéŸàŸíŸÖŸê', english: 'day of', emoji: 'üìÖ' },
                { arabic: 'ÿßŸÑÿØŸêŸëŸäŸÜŸê', english: 'judgment', emoji: '‚öñÔ∏è' },
                { arabic: 'ÿ•ŸêŸäŸéŸëÿßŸÉŸé', english: 'you alone', emoji: 'ü§≤' },
                { arabic: 'ŸÜŸéÿπŸíÿ®ŸèÿØŸè', english: 'we worship', emoji: 'üïå' },
                { arabic: 'ŸÜŸéÿ≥Ÿíÿ™ŸéÿπŸêŸäŸÜŸè', english: 'we seek help', emoji: 'ü§≤' },
                { arabic: 'ÿßŸêŸáŸíÿØŸêŸÜŸéÿß', english: 'guide us', emoji: 'üß≠' },
                { arabic: 'ÿßŸÑÿµŸêŸëÿ±Ÿéÿßÿ∑Ÿé', english: 'the path', emoji: 'üõ§Ô∏è' },
                { arabic: 'ÿßŸÑŸÖŸèÿ≥Ÿíÿ™ŸéŸÇŸêŸäŸÖŸé', english: 'the straight', emoji: '‚û°Ô∏è' }
            ]
        };

        const lessonInfo = {
            1: { title: 'Lesson 1', description: 'Basic Objects & People' },
            2: { title: 'Lesson 2', description: 'More Objects' },
            3: { title: 'Lesson 3', description: 'Family & Articles' },
            4: { title: 'Lesson 4', description: 'Adjectives' },
            5: { title: 'Lesson 5', description: 'Descriptive Words' },
            6: { title: 'Lesson 6', description: 'Body & Communication' },
            7: { title: 'Lesson 7', description: 'Sizes & Difficulty' },
            8: { title: 'Lesson 8', description: 'Time of Day' },
            9: { title: 'Lesson 9', description: 'Character Traits' },
            10: { title: 'Lesson 10', description: 'Names & Languages' },
            11: { title: 'Lesson 11', description: 'Prepositions & Location' },
            12: { title: 'Lesson 12', description: 'Pronouns' },
            13: { title: 'Lesson 13', description: 'Plurals & Descriptions' },
            14: { title: 'Lesson 14', description: 'Verbs (Past Tense)' },
            15: { title: 'Lesson 15', description: 'Question Words' },
            16: { title: 'Lesson 16', description: 'Places & Buildings' },
            17: { title: 'Lesson 17', description: 'Countries & Cities' },
            18: { title: 'Lesson 18', description: 'Numbers & Celebrations' },
            19: { title: 'Lesson 19', description: 'Nature' },
            20: { title: 'Lesson 20', description: 'Time: Days & Weeks' },
            21: { title: 'Lesson 21', description: 'Transportation' },
            22: { title: 'Lesson 22', description: 'Colors & Body Parts' },
            23: { title: 'Lesson 23', description: 'Surah Al-Fatiha' }
        };

        // State
        let currentLesson = 'all';
        let currentCards = [];
        let currentIndex = 0;
        let correctCount = 0;
        let incorrectCount = 0;
        let touchStartX = 0;
        let touchEndX = 0;
        let isSwiping = false;

        // Initialize
        function init() {
            generateLessonCards();
        }

        // Generate lesson cards
        function generateLessonCards() {
            const lessonGrid = document.getElementById('lesson-grid');
            lessonGrid.innerHTML = '';

            // All lessons card
            const allCard = document.createElement('div');
            allCard.className = 'lesson-card all-lessons-card';
            allCard.onclick = () => startLesson('all');
            
            const allWordCount = Object.values(vocabularyData).reduce((sum, lesson) => sum + lesson.length, 0);
            allCard.innerHTML = `
                <h3>üåü All Lessons</h3>
                <p class="word-count">Practice all ${allWordCount} words</p>
            `;
            lessonGrid.appendChild(allCard);

            // Individual lesson cards
            Object.keys(lessonInfo).forEach(lessonNum => {
                const card = document.createElement('div');
                card.className = 'lesson-card';
                card.onclick = () => startLesson(parseInt(lessonNum));
                
                const info = lessonInfo[lessonNum];
                const wordCount = vocabularyData[lessonNum]?.length || 0;
                
                card.innerHTML = `
                    <h3>${info.title}</h3>
                    <p class="word-count">${info.description} ‚Ä¢ ${wordCount} words</p>
                `;
                lessonGrid.appendChild(card);
            });
        }

        // Start lesson
        function startLesson(lesson) {
            currentLesson = lesson;
            
            if (lesson === 'all') {
                currentCards = [];
                Object.values(vocabularyData).forEach(lessonWords => {
                    currentCards = currentCards.concat(lessonWords);
                });
            } else {
                currentCards = [...vocabularyData[lesson]];
            }

            // Shuffle
            currentCards.sort(() => Math.random() - 0.5);

            currentIndex = 0;
            correctCount = 0;
            incorrectCount = 0;

            document.getElementById('cover-page').classList.add('hidden');
            document.getElementById('flashcard-page').classList.add('active');
            
            const title = lesson === 'all' ? 'All Lessons' : lessonInfo[lesson].title;
            document.getElementById('lesson-title').textContent = title;

            updateCard();
            updateStats();
        }

        // Update card
        function updateCard() {
            if (currentIndex >= currentCards.length) {
                currentIndex = 0;
            }

            const card = currentCards[currentIndex];
            document.getElementById('arabic-word').textContent = card.arabic;
            
            const imageEl = document.getElementById('word-image');
            imageEl.textContent = card.emoji;
            imageEl.classList.remove('revealed');
            
            const hintBtn = document.getElementById('hint-btn');
            hintBtn.disabled = false;
            hintBtn.textContent = 'üí° Hint';
            
            const input = document.getElementById('answer-input');
            input.value = '';
            input.className = '';
            
            document.getElementById('feedback').classList.remove('show');
            document.getElementById('correct-answer').classList.remove('show');
            document.getElementById('card-progress').textContent = 
                `${currentIndex + 1}/${currentCards.length}`;
        }

        // Check answer
        function checkAnswer() {
            const userAnswer = document.getElementById('answer-input').value.trim().toLowerCase();
            const correctAnswer = currentCards[currentIndex].english.toLowerCase();
            
            if (!userAnswer) return;
            
            const feedback = document.getElementById('feedback');
            const answerInput = document.getElementById('answer-input');
            
            // Check for plural mistakes
            const isPluralMistake = (
                (userAnswer + 's' === correctAnswer) ||
                (userAnswer + 'es' === correctAnswer) ||
                (correctAnswer + 's' === userAnswer) ||
                (correctAnswer + 'es' === userAnswer)
            );
            
            let isCorrect = userAnswer === correctAnswer;
            
            if (!isCorrect && !isPluralMistake) {
                isCorrect = levenshteinDistance(userAnswer, correctAnswer) <= 2;
            }
            
            if (isCorrect) {
                correctCount++;
                answerInput.classList.add('correct');
                feedback.textContent = '‚úì Correct! Click Next ‚Üí';
                feedback.className = 'feedback correct show';
            } else {
                incorrectCount++;
                answerInput.classList.add('incorrect');
                feedback.textContent = '‚úó Incorrect';
                feedback.className = 'feedback incorrect show';
                
                document.getElementById('correct-answer').textContent = 
                    `Answer: ${currentCards[currentIndex].english}`;
                document.getElementById('correct-answer').classList.add('show');
            }
            
            updateStats();
        }

        // Levenshtein distance
        function levenshteinDistance(str1, str2) {
            const matrix = [];
            
            for (let i = 0; i <= str2.length; i++) {
                matrix[i] = [i];
            }
            
            for (let j = 0; j <= str1.length; j++) {
                matrix[0][j] = j;
            }
            
            for (let i = 1; i <= str2.length; i++) {
                for (let j = 1; j <= str1.length; j++) {
                    if (str2.charAt(i - 1) === str1.charAt(j - 1)) {
                        matrix[i][j] = matrix[i - 1][j - 1];
                    } else {
                        matrix[i][j] = Math.min(
                            matrix[i - 1][j - 1] + 1,
                            matrix[i][j - 1] + 1,
                            matrix[i - 1][j] + 1
                        );
                    }
                }
            }
            
            return matrix[str2.length][str1.length];
        }

        // Show answer
        function showAnswer() {
            document.getElementById('correct-answer').textContent = 
                `Answer: ${currentCards[currentIndex].english}`;
            document.getElementById('correct-answer').classList.add('show');
        }

        // Navigation
        function nextCard() {
            currentIndex = (currentIndex + 1) % currentCards.length;
            updateCard();
        }

        function prevCard() {
            currentIndex = (currentIndex - 1 + currentCards.length) % currentCards.length;
            updateCard();
        }

        // Update stats
        function updateStats() {
            document.getElementById('correct-count').textContent = correctCount;
            document.getElementById('incorrect-count').textContent = incorrectCount;
            
            const total = correctCount + incorrectCount;
            const accuracy = total > 0 ? Math.round((correctCount / total) * 100) : 0;
            document.getElementById('accuracy').textContent = accuracy + '%';
        }

        // Back to cover
        function backToCover() {
            document.getElementById('cover-page').classList.remove('hidden');
            document.getElementById('flashcard-page').classList.remove('active');
        }

        // Touch handlers
        function handleTouchStart(e) {
            // Don't swipe if touching input, button, or interactive elements
            const target = e.target;
            if (target.tagName === 'INPUT' || 
                target.tagName === 'BUTTON' || 
                target.closest('button') ||
                target.closest('.input-section') ||
                target.closest('.button-group')) {
                isSwiping = false;
                return;
            }
            
            touchStartX = e.changedTouches[0].screenX;
            isSwiping = true;
        }

        function handleTouchMove(e) {
            if (!isSwiping) return;
            
            // Don't process if touching interactive elements
            const target = e.target;
            if (target.tagName === 'INPUT' || target.tagName === 'BUTTON') {
                isSwiping = false;
                return;
            }
            
            touchEndX = e.changedTouches[0].screenX;
            const flashcard = document.getElementById('flashcard');
            const diff = touchEndX - touchStartX;
            
            if (Math.abs(diff) > 30) {
                if (diff > 0) {
                    flashcard.classList.add('swipe-right');
                } else {
                    flashcard.classList.add('swipe-left');
                }
            } else {
                flashcard.classList.remove('swipe-left', 'swipe-right');
            }
        }

        function handleTouchEnd(e) {
            if (!isSwiping) return;
            
            const flashcard = document.getElementById('flashcard');
            const diff = touchEndX - touchStartX;
            
            if (Math.abs(diff) > 80) {
                if (diff > 0) {
                    nextCard();
                } else {
                    prevCard();
                }
            }
            
            flashcard.classList.remove('swipe-left', 'swipe-right');
            touchStartX = 0;
            touchEndX = 0;
            isSwiping = false;
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', () => {
            init();

            document.getElementById('check-btn').addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                checkAnswer();
            });
            document.getElementById('show-answer-btn').addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                showAnswer();
            });
            document.getElementById('skip-btn').addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                nextCard();
            });
            document.getElementById('prev-btn').addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                prevCard();
            });
            document.getElementById('next-btn').addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                nextCard();
            });
            
            document.getElementById('hint-btn').addEventListener('click', (e) => {
                e.preventDefault();
                e.stopPropagation();
                const imageEl = document.getElementById('word-image');
                const hintBtn = document.getElementById('hint-btn');
                
                imageEl.classList.add('revealed');
                hintBtn.disabled = true;
                hintBtn.textContent = '‚úì Shown';
            });

            document.getElementById('answer-input').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    checkAnswer();
                }
            });

            const flashcard = document.getElementById('flashcard');
            flashcard.addEventListener('touchstart', handleTouchStart, { passive: true });
            flashcard.addEventListener('touchmove', handleTouchMove, { passive: true });
            flashcard.addEventListener('touchend', handleTouchEnd, { passive: true });
            
            // Prevent touch events on interactive elements from bubbling to flashcard
            const interactiveElements = document.querySelectorAll('input, button, .input-section, .button-group');
            interactiveElements.forEach(el => {
                el.addEventListener('touchstart', (e) => {
                    e.stopPropagation();
                }, { passive: true });
                el.addEventListener('touchmove', (e) => {
                    e.stopPropagation();
                }, { passive: true });
                el.addEventListener('touchend', (e) => {
                    e.stopPropagation();
                }, { passive: true });
            });
        });
    </script>
</body>
</html>
